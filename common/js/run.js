$(function(){/** Copyright (c) 2013 paradox-tm.com / muraki-takuma** Permission is hereby granted, free of charge, to any person obtaining a* copy of this software and associated documentation files (the "Software"),* to deal in the Software without restriction, including without limitation* the rights to use, copy, modify, merge, publish, distribute, sublicense,* and/or sell copies of the Software, and to permit persons to whom the* Software is furnished to do so, subject to the following conditions:** The above copyright notice and this permission notice shall be included in* all copies or substantial portions of the Software.** THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER* DEALINGS IN THE SOFTWARE.*//* ---------------------------------------------------------------------	main-visual---------------------------------------------------------------------*/	var Wrapper = $("#box-mainvisual").prepend('<p class="back"><a href="#"></a></p><p class="next"><a href="#"></a></p>');	var obj = $(Wrapper),	bnrList = $(obj).find("#list-main-visual"),	bnrListWidth = 0,	bnrListSize = 0,	bnrItem = $(obj).find("#list-main-visual").find("li"),	bnrNum = $(bnrItem).length,	btnBack = $(obj).find(".back").find("a"),	btnNext = $(obj).find(".next").find("a"),	defaultImageSize = 960,//max-main-visual-size	windowSize = $(window).width(),	slideSpeed = 300, //slide speed	loopSpeed = 5000, //loop speed	anmFlg = false;	if (windowSize >= defaultImageSize) {		//GET List width		for(var i=0; bnrNum+1 > i; i++){			bnrListWidth = bnrListWidth + $(bnrItem[i]).width();		}		//Write slide list width		$(bnrList).css({width:bnrListWidth});	}else{		//Write slide list width (window size)		bnrListResize = bnrNum * windowSize;		$(bnrItem).css("width", windowSize);		bnrList.css("width", bnrListResize);		defaultImageSize = windowSize;	}	//for accessibility	$(bnrItem).css('display', 'table-cell');	//Next Button	$(btnNext).click(function(){		moveSlide(true);		return false;	});	//Back Button	$(btnBack).click(function(){		moveSlide(false);		return false;	});	//Stop timer	Wrapper.each(function(){		$(this).mouseover(function(){			stopTimer(true,false);		 });		 $(this).mouseleave(function(){				stopTimer(false,false);		 });	});	//Stop timer	var arrayItem = [btnNext,btnBack];	$.each(arrayItem, function(){	     this.focus(function(){ // stop timer by focus			stopTimer(false,true);	     });		this.blur(function(){ // start timer by focus out			stopTimer(false,false);	     });	});/* -----------------------------------	MainVisual Function----------------------------------- */	//Reload	function reloadFunction(){		window.onload = function() {			if(960 > windowSize){				defaultImageSize = windowSize;			}		};	}	//reload	reloadFunction();	//Resize	function resizeFunction() {		$(window).resize(function() {			windowSize = $(window).width();			bnrListResize = bnrNum * windowSize;			if(960<=windowSize){				$(bnrItem).css("width", 960);				bnrList.css("width", 960 * bnrNum);				defaultImageSize = 960;			}else if(960>windowSize){				$(bnrItem).css("width", windowSize);				bnrList.css("width", bnrListResize);				defaultImageSize = windowSize;			}		});	}	//resize	resizeFunction();	//Slider	function moveSlide(status) {		if(anmFlg === false){			anmFlg = true;			//Animation move right			if(status === true) {				$(bnrList).animate({marginLeft : -defaultImageSize},slideSpeed,function(){				$(bnrList).css({marginLeft : 0});				$(bnrList).find("li:last").after($(bnrList).find("li").eq(0));				anmFlg = false;				});				return false;				//Animation move left			}else if(status === false) {				$(bnrList).css({marginLeft : -defaultImageSize});				$(bnrList).find("li").eq(0).before($(bnrList).find("li:last"));				$(bnrList).animate({marginLeft : 0},slideSpeed,function(){				anmFlg = false;			});				return false;			}		}else{			return false;	}	};	//Timer	var loopSlideTimer = setInterval(function(){	moveSlide(true);	},loopSpeed);	//Stop timer function	function stopTimer(mouseOver, focusIn) {		    if(mouseOver === true && focusIn === false) {		    	clearInterval(loopSlideTimer);		    }else if(mouseOver === false && focusIn === true) {		    	clearInterval(loopSlideTimer);		    }else{		    	clearInterval(loopSlideTimer);		    	loopSlideTimer = setInterval(				function(){moveSlide(true);},loopSpeed);		    }  	}  	//Flick Control    $(bnrItem).bind("touchstart touchmove touchend", function (e){        var touch = e.originalEvent.touches[0];        if (e.type === "touchstart") {            startX = touch.pageX;        } else if (e.type === "touchmove") {            diffX = touch.pageX - startX;            e.preventDefault(); //Banner Link Cancel        } else if (e.type === "touchend") {            if (diffX < -40) {                //Animation move left				moveSlide(true);            } else if (diffX > 40) {                //Animation move right				moveSlide(false);            }else{            	$(bnrItem).unbind("touchstart touchmove touchend",preventDefault);            }        }    });/* ---------------------------------------------------------------------	sp menu---------------------------------------------------------------------*/	var listGlovalMenu = $("#list-global-nav"),	btnSpMenu = $("#btn-sp-menu").find("a"),	spWidth = 630;	spMenuFunc = function() {		btnSpMenu.click(function(event) {			if (listGlovalMenu.css("display")==="none") {				listGlovalMenu.slideDown(200);				return false;			}else{				listGlovalMenu.slideUp(200);				return false;			}		});	}	// userAgent	var agent = navigator.userAgent;	var userAgent = window.navigator.userAgent.toLowerCase();	var appVersion = window.navigator.appVersion.toLowerCase();      if(agent.search(/iPhone/) != -1 || agent.search(/iPad/) != -1 || agent.search(/iPod/) != -1 || agent.search(/Android/) != -1){			spMenuFunc();      }else{		$(window).resize(function() {			if(spWidth <= window.innerWidth) {					listGlovalMenu.css("display","table");			}else if(userAgent.indexOf("msie") != -1){				//ie 8 hack				if (appVersion.indexOf("msie 8.") != -1) {	    			listGlovalMenu.css("display","table");	  			}			}else{					listGlovalMenu.css("display","none");			}		});		spMenuFunc();	}/* ---------------------------------------------------------------------backToTop---------------------------------------------------------------------*/	var backToTop;	backToTop = function() {	  var btnTop;	  btnTop = $('#btn-back-top').find('a');	  btnTop.click(function(event) {		$('html,body').animate({		  scrollTop: 0		}, 1000);		return false;		event.preventDefault();	  });	}	backToTop();});